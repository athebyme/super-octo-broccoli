version: "3.9"

services:
  seller-platform:
    build: .
    container_name: seller-platform
    environment:
      - APP_MODULE=seller_platform:app
      - PORT=${SELLER_PORT:-5001}
      - SECRET_KEY=${SECRET_KEY:-wb-seller-platform-secret-key-change-in-production}
      - DATABASE_URL=${DATABASE_URL:-sqlite:////app/data/seller_platform.db}
      - ENCRYPTION_KEY=${ENCRYPTION_KEY:-}
    ports:
      - "${SELLER_PORT:-5001}:5001"
    volumes:
      - ./uploads:/app/uploads
      - ./processed:/app/processed
      - ./data:/app/data
    restart: unless-stopped

  wb-calculator:
    build: .
    container_name: wb-calculator
    environment:
      - APP_MODULE=app:app
      - PORT=${CALCULATOR_PORT:-5000}
      - APP_SECRET_KEY=${APP_SECRET_KEY:-wb-calculator-secret}
    ports:
      - "${CALCULATOR_PORT:-5000}:5000"
    volumes:
      - ./uploads:/app/uploads
      - ./processed:/app/processed
      - ./data:/app/data
    restart: unless-stopped

